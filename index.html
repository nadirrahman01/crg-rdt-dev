<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cordoba Research Group — Research Drafting Tool</title>

  <!-- Cordoba / BlueMatrix-style UI CSS -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Optional: if you already use Tailwind elsewhere, keep it. Not required for this UI. -->
  <!-- <script src="https://cdn.tailwindcss.com"></script> -->
</head>

<body>
  <main id="rdtApp" class="rdt-shell">
    <!-- =========================
         Header / Toolbar
    ========================== -->
    <section class="rdt-card" style="padding:16px 16px 14px 16px;">
      <div class="rdt-toolbar">
        <div class="rdt-titleblock">
          <div class="rdt-kicker">Cordoba Research Group</div>
          <div class="rdt-title">Research Drafting Tool</div>
          <div class="rdt-meta">
            <span id="sessionLabel">Session</span> <strong id="sessionValue">00</strong>
            <span style="margin:0 10px; opacity:.35;">|</span>
            Version <strong id="versionValue">1.0</strong>
            <span style="margin:0 10px; opacity:.35;">|</span>
            Draft watermark: <strong id="draftWatermarkValue">ON</strong>
            <span style="margin:0 10px; opacity:.35;">|</span>
            Autosave: <strong id="autosaveValue">—</strong>
          </div>
        </div>

        <div class="rdt-inline-options" style="justify-content:flex-end;">
          <span class="rdt-kpi"><span>Completion</span> <strong id="completionValue">0 / 0</strong></span>
          <span class="rdt-kpi"><span>Status</span> <strong id="statusPill">Draft</strong></span>

          <button type="button" id="clearAutosaveBtn" class="rdt-btn-subtle">Clear autosave</button>
          <button type="button" id="resetFormBtn" class="rdt-btn-subtle">Reset form</button>
          <button type="button" id="jumpToFirstMissingBtn">Jump to first missing</button>
        </div>
      </div>
    </section>

    <!-- =========================
         Top Controls
    ========================== -->
    <section class="rdt-card" style="margin-top:12px;">
      <h2 style="margin:0 0 10px 0;">Note builder</h2>
      <div class="rdt-subtle" style="margin-bottom:12px;">
        Fill the required fields, then export to Word. Use <strong>Internal</strong> for full detail, <strong>Public</strong> for website notes,
        and <strong>Client-safe</strong> for externally shareable content.
      </div>

      <div class="rdt-grid-3">
        <div>
          <label for="audience">Audience</label>
          <select id="audience" name="audience">
            <option value="internal" selected>Internal</option>
            <option value="public">Public</option>
            <option value="client_safe">Client-safe</option>
          </select>
        </div>

        <div>
          <label for="template">Template</label>
          <select id="template" name="template">
            <option value="" selected>Select…</option>
            <option value="macro">Macro Note</option>
            <option value="equity">Equity Research</option>
            <option value="credit">Credit / FI Note</option>
            <option value="thematic">Thematic</option>
            <option value="event">Event / Reaction</option>
          </select>
        </div>

        <div>
          <label for="noteType">Note type</label>
          <select id="noteType" name="noteType">
            <option value="" selected>Select…</option>
            <option value="macro">Macro</option>
            <option value="equity">Equity</option>
            <option value="fixed_income">Fixed Income</option>
            <option value="commodities">Commodities</option>
            <option value="geopolitics">Geopolitics</option>
          </select>
        </div>
      </div>

      <div class="rdt-grid-2" style="margin-top:12px;">
        <div>
          <label for="topic">Topic</label>
          <input id="topic" name="topic" type="text" placeholder="e.g., Indonesia FX, Uranium supply, Vietnam domestic demand..." />
        </div>

        <div>
          <label for="title">Title</label>
          <input id="title" name="title" type="text" placeholder="Short, investor-ready title" />
        </div>
      </div>

      <div class="rdt-grid-3" style="margin-top:12px;">
        <div>
          <label for="status">Status</label>
          <select id="status" name="status">
            <option value="draft" selected>Draft</option>
            <option value="review">In review</option>
            <option value="final">Final</option>
          </select>
        </div>

        <div>
          <label for="reviewedBy">Reviewed by</label>
          <select id="reviewedBy" name="reviewedBy">
            <option value="" selected>Select…</option>
            <option value="none">—</option>
            <option value="lead">Lead Analyst</option>
            <option value="editor">Editor</option>
            <option value="ic">IC / PM</option>
          </select>
        </div>

        <div>
          <label for="changeNote">Change note</label>
          <input id="changeNote" name="changeNote" type="text" placeholder="Optional (e.g., Updated data / Revised view)" />
        </div>
      </div>

      <div class="rdt-inline-options" style="margin-top:12px;">
        <label><input type="checkbox" id="bumpMajorOnExport" /> Bump major version on export</label>
        <label><input type="checkbox" id="autoGenerateExecSummary" /> Auto-generate executive summary (if enabled)</label>
      </div>

      <!-- Equity-only meta (kept hidden unless JS shows it based on noteType/template) -->
      <div id="equityMeta" class="rdt-card" style="margin-top:14px; display:none; background:rgba(132,95,15,.05); border:1px solid rgba(132,95,15,.14); box-shadow:none;">
        <h3 style="margin:0 0 8px 0;">Equity research metadata</h3>

        <div class="rdt-grid-3">
          <div>
            <label for="ticker">Ticker</label>
            <input id="ticker" name="ticker" type="text" placeholder="e.g., MSAN (HOSE)" />
          </div>
          <div>
            <label for="targetPrice">Target price</label>
            <input id="targetPrice" name="targetPrice" type="text" placeholder="e.g., 102.0" />
          </div>
          <div>
            <label for="crgRating">CRG rating</label>
            <select id="crgRating" name="crgRating">
              <option value="" selected>Select…</option>
              <option value="buy">Buy</option>
              <option value="hold">Hold</option>
              <option value="sell">Sell</option>
              <option value="watch">Watchlist</option>
            </select>
          </div>
        </div>

        <div class="rdt-grid-2" style="margin-top:10px;">
          <div>
            <label for="valuationSummary">Valuation summary</label>
            <textarea id="valuationSummary" name="valuationSummary" placeholder="Short valuation setup (multiple, drivers, anchor)"></textarea>
          </div>
          <div>
            <label for="keyAssumptions">Key assumptions</label>
            <textarea id="keyAssumptions" name="keyAssumptions" placeholder="Revenue, margins, FX, discount rate, etc."></textarea>
          </div>
        </div>

        <div class="rdt-grid-2" style="margin-top:10px;">
          <div>
            <label for="scenarioNotes">Scenario notes</label>
            <textarea id="scenarioNotes" name="scenarioNotes" placeholder="Bull/base/bear — what changes and why"></textarea>
          </div>
          <div>
            <label for="modelLink">Model link</label>
            <input id="modelLink" name="modelLink" type="url" placeholder="Paste a link to the model (Drive/Dropbox/etc.)" />
          </div>
        </div>

        <div class="rdt-grid-2" style="margin-top:10px;">
          <div>
            <label for="modelFiles">Model files (optional upload)</label>
            <input id="modelFiles" name="modelFiles" type="file" multiple />
          </div>
          <div>
            <label for="priceChart">Price chart image (optional)</label>
            <input id="priceChart" name="priceChart" type="file" accept="image/*" />
          </div>
        </div>
      </div>
    </section>

    <!-- =========================
         Executive summary
    ========================== -->
    <section class="rdt-card" style="margin-top:12px;">
      <div class="rdt-toolbar" style="margin-bottom:8px;">
        <h2 style="margin:0;">Executive summary</h2>
        <div class="rdt-wordcount"><span id="execWordCount">0</span> words</div>
      </div>

      <textarea id="executiveSummary" name="executiveSummary" placeholder="Optional — or enable auto-generate. Keep it investor-ready and tight."></textarea>
      <div class="rdt-subtle" style="margin-top:8px;">Aim for clarity: what changed, why it matters, what we’d do about it.</div>
    </section>

    <!-- =========================
         Author
    ========================== -->
    <section class="rdt-card" style="margin-top:12px;">
      <h2 style="margin:0 0 10px 0;">Author</h2>

      <div class="rdt-grid-3">
        <div>
          <label for="authorLastName">Last name</label>
          <input id="authorLastName" name="authorLastName" type="text" placeholder="Rahman" />
        </div>
        <div>
          <label for="authorFirstName">First name</label>
          <input id="authorFirstName" name="authorFirstName" type="text" placeholder="Nadir" />
        </div>
        <div>
          <label for="authorPhone">Phone</label>
          <div style="display:grid; grid-template-columns: 88px 1fr; gap:10px; margin-top:6px;">
            <select id="authorPhoneCountry" name="authorPhoneCountry" aria-label="Country code">
              <option value="+44" selected>+44</option>
              <option value="+1">+1</option>
              <option value="+971">+971</option>
              <option value="+65">+65</option>
            </select>
            <input id="authorPhone" name="authorPhone" type="tel" placeholder="National number" />
          </div>
          <div class="rdt-subtle" style="margin-top:6px;">
            Client-safe number: <strong id="authorPhoneSafe">—</strong>
          </div>
        </div>
      </div>

      <div style="margin-top:12px;">
        <div class="rdt-toolbar">
          <h3 style="margin:0;">Co-authors</h3>
          <button type="button" id="addCoAuthorBtn">Add co-author</button>
        </div>
        <div id="coAuthors" style="margin-top:10px; display:grid; gap:10px;"></div>
      </div>
    </section>

    <!-- =========================
         Key takeaways
    ========================== -->
    <section class="rdt-card" style="margin-top:12px;">
      <div class="rdt-toolbar" style="margin-bottom:8px;">
        <h2 style="margin:0;">Key takeaways</h2>
        <div class="rdt-wordcount"><span id="takeawaysWordCount">0</span> words</div>
      </div>

      <textarea id="keyTakeaways" name="keyTakeaways" placeholder="- Keep each takeaway on its own line&#10;- Investor-relevant, not descriptive&#10;- If it’s internal, you can be more direct"></textarea>
      <div class="rdt-subtle" style="margin-top:8px;">Tip: treat these like the bullets a PM would copy into a morning note.</div>
    </section>

    <!-- =========================
         Analysis and commentary
    ========================== -->
    <section class="rdt-card" style="margin-top:12px;">
      <div class="rdt-toolbar" style="margin-bottom:8px;">
        <h2 style="margin:0;">Analysis and commentary</h2>
        <div class="rdt-wordcount"><span id="analysisWordCount">0</span> words</div>
      </div>

      <textarea id="analysis" name="analysis" placeholder="Write in paragraphs. Reference figures as (Figure 1), (Figure 2), etc."></textarea>
      <div class="rdt-subtle" style="margin-top:8px;">
        Keep it structured: set-up → what’s priced → what’s mispriced → what would change your mind.
      </div>
    </section>

    <!-- =========================
         Additional content
    ========================== -->
    <section class="rdt-card" style="margin-top:12px;">
      <div class="rdt-toolbar" style="margin-bottom:8px;">
        <h2 style="margin:0;">Additional content</h2>
        <div class="rdt-wordcount"><span id="contentWordCount">0</span> words</div>
      </div>

      <textarea id="content" name="content" placeholder="Optional appendix / data notes / methodology / disclosures"></textarea>
    </section>

    <!-- =========================
         The Cordoba view
    ========================== -->
    <section class="rdt-card" style="margin-top:12px;">
      <div class="rdt-toolbar" style="margin-bottom:8px;">
        <h2 style="margin:0;">The Cordoba view</h2>
        <div class="rdt-wordcount"><span id="cordobaViewWordCount">0</span> words</div>
      </div>

      <textarea id="cordobaView" name="cordobaView" placeholder="What we think, and how we would position (internal can be explicit)."></textarea>
    </section>

    <!-- =========================
         Figures and charts
    ========================== -->
    <section class="rdt-card" style="margin-top:12px;">
      <h2 style="margin:0 0 10px 0;">Figures and charts</h2>

      <div class="rdt-grid-2">
        <div>
          <label for="imageFiles">Upload images</label>
          <input id="imageFiles" name="imageFiles" type="file" accept="image/*" multiple />
          <div class="rdt-subtle" style="margin-top:8px;">
            Add images at the end. In the text, reference as (Figure 1), (Figure 2)…
          </div>
        </div>

        <div>
          <label>Figure list</label>
          <div id="figureList" style="display:grid; gap:10px;"></div>
        </div>
      </div>
    </section>

    <!-- =========================
         Export / Validation
    ========================== -->
    <section class="rdt-card" style="margin-top:12px;">
      <h2 style="margin:0 0 10px 0;">Export</h2>

      <div class="rdt-inline-options" style="margin-bottom:10px;">
        <label><input type="checkbox" id="confirmReady" /> I confirm the draft is ready to export.</label>
        <label><input type="checkbox" id="emailRouting" /> Email routing</label>
      </div>

      <div class="rdt-grid-2">
        <div>
          <button type="button" id="exportBtn" class="rdt-btn-primary">Generate Word Document</button>
          <div class="rdt-subtle" style="margin-top:10px;">
            Export creates a Word doc in the selected template format and applies draft watermark rules.
          </div>
        </div>

        <div>
          <label>Validation</label>
          <div id="validationList" aria-live="polite">—</div>
          <div class="rdt-subtle" style="margin-top:10px;">
            Quick link: <a href="#" id="quickLink">Open missing field</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer spacing -->
    <div style="height:24px;"></div>
  </main>

  <!-- Your “final product” JS (the one we just wrote) -->
  <script src="assets/app.js"></script>
</body>
</html>
