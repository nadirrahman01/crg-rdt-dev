<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cordoba Research Group — Research Drafting Tool</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="rdt-shell">

    <!-- =========================
         Top bar (bank workstation)
         ========================= -->
    <header class="rdt-topbar">
      <div>
        <div class="rdt-brand-title">Research Drafting Tool</div>
        <div class="rdt-brand-sub">
          <span>Cordoba Research Group</span>
          <span class="rdt-dot">•</span>
          <span id="sessionId">Session —</span>
          <span class="rdt-dot">•</span>
          <span id="saveStatus">Autosave: —</span>
          <span class="rdt-dot">•</span>
          <span id="draftBadge">Draft watermark: ON</span>
        </div>
      </div>

      <div class="rdt-topbar-right">
        <button class="rdt-btn rdt-btn-ghost" id="btnClearAutosave" type="button">Clear autosave</button>
        <button class="rdt-btn rdt-btn-ghost" id="btnResetForm" type="button">Reset form</button>
      </div>
    </header>

    <!-- =========================
         Main grid
         ========================= -->
    <main class="rdt-main">

      <!-- =========================
           LEFT: Authoring
           ========================= -->
      <section class="rdt-left">

        <!-- Note builder -->
        <div class="rdt-card" id="cardNoteBuilder">
          <div class="rdt-card-head">
            <div>
              <div class="rdt-card-title">Note builder</div>
              <div class="rdt-card-sub">Choose template and metadata. Required fields drive validation and export readiness.</div>
            </div>
            <div class="rdt-wc"><span id="completionPct">0</span>%</div>
          </div>

          <div class="rdt-grid-2">
            <div class="rdt-field">
              <label>Mode <span class="rdt-req">*</span></label>
              <div class="rdt-seg" role="tablist" aria-label="Mode">
                <button class="rdt-seg-btn active" type="button" data-mode="internal" id="modeInternal">Internal</button>
                <button class="rdt-seg-btn" type="button" data-mode="public" id="modePublic">Public</button>
                <button class="rdt-seg-btn" type="button" data-mode="client-safe" id="modeClientSafe">Client-safe</button>
              </div>
              <div class="rdt-micro">Client-safe suppresses internal language and enforces clean export styling.</div>
              <input type="hidden" id="modeValue" value="internal" />
            </div>

            <div class="rdt-grid-2">
              <div class="rdt-field">
                <label>Template <span class="rdt-req">*</span></label>
                <select id="template">
                  <option value="">Select…</option>
                  <option value="crg-equity">CRG Equity</option>
                  <option value="crg-macro">CRG Macro</option>
                  <option value="crg-credit">CRG Credit</option>
                  <option value="crg-commodities">CRG Commodities</option>
                </select>
              </div>

              <div class="rdt-field">
                <label>Note type <span class="rdt-req">*</span></label>
                <select id="noteType">
                  <option value="">Select…</option>
                  <option value="equity">Equity Research</option>
                  <option value="macro">Macro Note</option>
                  <option value="credit">Credit / FI Note</option>
                  <option value="commodities">Commodities Note</option>
                </select>
              </div>
            </div>
          </div>

          <div class="rdt-divider"></div>

          <div class="rdt-grid-2">
            <div class="rdt-field">
              <label>Topic <span class="rdt-req">*</span></label>
              <input id="topic" type="text" placeholder="e.g., Kazakhstan uranium supply, Indonesia FX, UST curve repricing" />
            </div>

            <div class="rdt-field">
              <label>Title <span class="rdt-req">*</span></label>
              <input id="title" type="text" placeholder="Keep it sharp. Bank-style. One line." />
            </div>
          </div>

          <div class="rdt-grid-2" style="margin-top:12px;">
            <div class="rdt-field">
              <label>Status</label>
              <select id="status">
                <option value="draft">Draft</option>
                <option value="ready">Ready</option>
                <option value="final">Final</option>
              </select>
            </div>

            <div class="rdt-field">
              <label>Reviewed by</label>
              <select id="reviewedBy">
                <option value="">Select…</option>
                <option value="osman">Osman</option>
                <option value="chief">Head of Research</option>
                <option value="peer">Peer review</option>
              </select>
            </div>
          </div>

          <div class="rdt-grid-2" style="margin-top:12px;">
            <div class="rdt-field">
              <label>Change note</label>
              <input id="changeNote" type="text" placeholder="Optional: Updated valuation, refreshed comps, revised target price…" />
            </div>

            <div class="rdt-inline">
              <label class="rdt-check" style="margin-top:20px;">
                <input id="bumpMajor" type="checkbox" />
                Bump major version on export
              </label>
            </div>
          </div>
        </div>

        <!-- Equity header (shown for Equity Research) -->
        <div class="rdt-card" id="cardEquityHeader">
          <div class="rdt-card-head rdt-card-head-compact">
            <div>
              <div class="rdt-card-title">Equity tear sheet header</div>
              <div class="rdt-card-sub">These fields populate the top-of-note summary panel in Word export.</div>
            </div>
            <div class="rdt-wc"><span id="eqHeaderStatus">—</span></div>
          </div>

          <div class="rdt-grid-4">
            <div class="rdt-field">
              <label>Ticker <span class="rdt-req">*</span></label>
              <input id="ticker" type="text" placeholder="AAPL" />
            </div>

            <div class="rdt-field">
              <label>Target price <span class="rdt-req">*</span></label>
              <input id="targetPrice" type="text" placeholder="210" />
            </div>

            <div class="rdt-field">
              <label>Currency</label>
              <select id="tpCurrency">
                <option value="USD">USD</option>
                <option value="GBP">GBP</option>
                <option value="EUR">EUR</option>
                <option value="HKD">HKD</option>
              </select>
            </div>

            <div class="rdt-field">
              <label>CRG rating <span class="rdt-req">*</span></label>
              <select id="crgRating">
                <option value="">Select…</option>
                <option value="buy">BUY</option>
                <option value="hold">HOLD</option>
                <option value="sell">SELL</option>
              </select>
            </div>
          </div>

          <div class="rdt-grid-2" style="margin-top:12px;">
            <div class="rdt-field">
              <label>Valuation summary</label>
              <textarea id="valuationSummary" placeholder="Method, comp set, key bridge, quick sensitivity notes (2–4 lines)."></textarea>
              <div class="rdt-micro">Used in tear sheet panel and valuation section header callout.</div>
            </div>

            <div class="rdt-field">
              <label>Equity stats (optional)</label>
              <textarea id="equityStats" placeholder="Market cap, EV/EBITDA, P/E, FCF yield, ROIC, net debt/EBITDA — keep it tight."></textarea>
              <div class="rdt-micro">If supplied, appears as a stats block in the tear sheet.</div>
            </div>
          </div>
        </div>

        <!-- Author -->
        <div class="rdt-card" id="cardAuthor">
          <div class="rdt-card-head">
            <div>
              <div class="rdt-card-title">Author</div>
              <div class="rdt-card-sub">Author metadata prints in the footer and compliance block.</div>
            </div>
            <div class="rdt-wc"><span id="authorStatus">—</span></div>
          </div>

          <div class="rdt-grid-3">
            <div class="rdt-field">
              <label>Last name <span class="rdt-req">*</span></label>
              <input id="authorLastName" type="text" placeholder="Rahman" />
            </div>
            <div class="rdt-field">
              <label>First name <span class="rdt-req">*</span></label>
              <input id="authorFirstName" type="text" placeholder="Nadir" />
            </div>
            <div class="rdt-field">
              <label>Phone</label>
              <div class="rdt-split">
                <select id="authorDial">
                  <option value="+44">+44</option>
                  <option value="+1">+1</option>
                  <option value="+971">+971</option>
                  <option value="+65">+65</option>
                </select>
                <input id="authorPhone" type="tel" placeholder="Number" />
              </div>
              <div class="rdt-micro">Used only for internal exports unless client-safe is selected.</div>
            </div>
          </div>

          <div class="rdt-divider"></div>

          <div class="rdt-card-head rdt-card-head-compact">
            <div>
              <div class="rdt-card-title">Co-authors</div>
              <div class="rdt-card-sub">Add additional authors. These print under the author line.</div>
            </div>
            <button class="rdt-btn rdt-btn-ghost" id="btnAddCoAuthor" type="button">Add co-author</button>
          </div>

          <div class="rdt-coauthors" id="coAuthorsList">
            <div class="rdt-empty" id="coAuthorsEmpty">No co-authors added.</div>
          </div>
        </div>

        <!-- Investment thesis -->
        <div class="rdt-card" id="cardThesis">
          <div class="rdt-card-head">
            <div>
              <div class="rdt-card-title">Investment thesis <span class="rdt-req">*</span></div>
              <div class="rdt-card-sub">This is the top narrative paragraph under the tear sheet (bank-style).</div>
            </div>
            <div class="rdt-wc"><span id="wcThesis">0</span> words</div>
          </div>

          <textarea id="investmentThesis" placeholder="Start with what’s mispriced, why it matters, and what changes the story. Tight, specific, bank tone."></textarea>
          <div class="rdt-helper">Aim for 6–10 lines. No filler. Avoid generic macro language.</div>
        </div>

        <!-- Key takeaways -->
        <div class="rdt-card" id="cardTakeaways">
          <div class="rdt-card-head">
            <div>
              <div class="rdt-card-title">Key takeaways <span class="rdt-req">*</span></div>
              <div class="rdt-card-sub">3–7 lines. Each line exports as a bullet on the front page.</div>
            </div>
            <div class="rdt-wc"><span id="wcTakeaways">0</span> words</div>
          </div>

          <textarea id="keyTakeaways" placeholder="- 1 line per takeaway. Keep each point standalone."></textarea>
        </div>

        <!-- Company analysis -->
        <div class="rdt-card" id="cardCompanyAnalysis">
          <div class="rdt-card-head">
            <div>
              <div class="rdt-card-title">Company analysis <span class="rdt-req">*</span></div>
              <div class="rdt-card-sub">Business model, drivers, catalysts, and what the market misses.</div>
            </div>
            <div class="rdt-wc"><span id="wcCompany">0</span> words</div>
          </div>

          <textarea id="companyAnalysis" placeholder="Structure: (1) Business model (2) Why now (3) Catalysts (4) Risks."></textarea>
        </div>

        <!-- Valuation -->
        <div class="rdt-card" id="cardValuation">
          <div class="rdt-card-head">
            <div>
              <div class="rdt-card-title">Valuation <span class="rdt-req">*</span></div>
              <div class="rdt-card-sub">Method, bridge, key sensitivities. This exports with clean subheads.</div>
            </div>
            <div class="rdt-wc"><span id="wcValuation">0</span> words</div>
          </div>

          <textarea id="valuation" placeholder="DCF / comps / SOTP. Call out the key assumption that moves value most."></textarea>
        </div>

        <!-- Key assumptions -->
        <div class="rdt-card" id="cardAssumptions">
          <div class="rdt-card-head">
            <div>
              <div class="rdt-card-title">Key assumptions <span class="rdt-req">*</span></div>
              <div class="rdt-card-sub">Revenue, margins, WACC/terminal, unit economics. Exports as a table-like block.</div>
            </div>
            <div class="rdt-wc"><span id="wcAssumptions">0</span> words</div>
          </div>

          <textarea id="keyAssumptions" placeholder="Write as short lines. Example: FY26E revenue +12%, EBIT margin 18%, WACC 9.2%, terminal 2.0%."></textarea>
        </div>

        <!-- Scenarios -->
        <div class="rdt-card" id="cardScenarios">
          <div class="rdt-card-head">
            <div>
              <div class="rdt-card-title">Scenarios</div>
              <div class="rdt-card-sub">Base / bull / bear with triggers and probability. Optional but recommended.</div>
            </div>
            <div class="rdt-wc"><span id="wcScenarios">0</span> words</div>
          </div>

          <textarea id="scenarios" placeholder="Base: … (60%) | Bull: … (25%) | Bear: … (15%). Keep it crisp."></textarea>
        </div>

        <!-- Appendix -->
        <div class="rdt-card" id="cardAppendix">
          <div class="rdt-card-head">
            <div>
              <div class="rdt-card-title">Appendix</div>
              <div class="rdt-card-sub">Extra detail, data notes, model links, or compliance language.</div>
            </div>
            <div class="rdt-wc"><span id="wcAppendix">0</span> words</div>
          </div>

          <textarea id="appendix" placeholder="Optional: data definitions, comp tables, methodology notes."></textarea>
        </div>

        <!-- Cordoba view -->
        <div class="rdt-card" id="cardCordobaView">
          <div class="rdt-card-head">
            <div>
              <div class="rdt-card-title">The Cordoba view <span class="rdt-req">*</span></div>
              <div class="rdt-card-sub">One paragraph: rating logic, risk/reward, what changes your mind.</div>
            </div>
            <div class="rdt-wc"><span id="wcCordoba">0</span> words</div>
          </div>

          <textarea id="cordobaView" placeholder="Speak plainly. Strong view. Clear why. Define the watch items."></textarea>
        </div>

        <!-- Figures -->
        <div class="rdt-card" id="cardFigures">
          <div class="rdt-card-head">
            <div>
              <div class="rdt-card-title">Figures and charts</div>
              <div class="rdt-card-sub">Upload figures at the end; reference as “Figure 1”, “Figure 2” inside the note.</div>
            </div>
            <div class="rdt-wc"><span id="figCount">0</span> figures</div>
          </div>

          <div class="rdt-grid-2">
            <div class="rdt-field">
              <label>Upload images</label>
              <input id="figureFiles" type="file" multiple accept="image/*" />
              <div class="rdt-micro">PNG/JPG recommended. Captions can be edited below after upload.</div>
            </div>
            <div class="rdt-field">
              <label>Price chart (optional)</label>
              <input id="priceChartFile" type="file" accept="image/*" />
              <div class="rdt-micro">If supplied, prints in the tear sheet.</div>
            </div>
          </div>

          <div class="rdt-divider"></div>

          <div class="rdt-figures" id="figuresList">
            <div class="rdt-empty" id="figuresEmpty">No figures uploaded yet.</div>
          </div>
        </div>

      </section>

      <!-- =========================
           RIGHT: Export / validation
           ========================= -->
      <aside class="rdt-right">

        <div class="rdt-card rdt-sticky" id="cardExport">
          <div class="rdt-card-head">
            <div>
              <div class="rdt-card-title">Export</div>
              <div class="rdt-card-sub">Validation is strict. Export produces a bank-style Word note with a tear sheet.</div>
            </div>
          </div>

          <label class="rdt-check" style="margin-top:2px;">
            <input id="confirmReady" type="checkbox" />
            I confirm the draft is ready to export.
          </label>

          <div class="rdt-actions">
            <button class="rdt-btn rdt-btn-primary" id="btnExportWord" type="button">Generate Word Document</button>
            <button class="rdt-btn rdt-btn-ghost" id="btnJumpMissing" type="button">Jump to first missing</button>
          </div>

          <div class="rdt-kpis">
            <div class="rdt-kpi">
              <div class="rdt-kpi-label">Completion</div>
              <div class="rdt-kpi-value"><span id="kpiCompletion">0</span>%</div>
            </div>
            <div class="rdt-kpi">
              <div class="rdt-kpi-label">Autosave</div>
              <div class="rdt-kpi-value" id="kpiAutosave">—</div>
            </div>
          </div>

          <div class="rdt-divider"></div>

          <div id="validationBox" class="rdt-warn" style="display:none;">
            Missing required fields. Fix these before exporting:
            <ul class="rdt-miss" id="missingList"></ul>
          </div>

          <div id="readyBox" class="rdt-ok" style="display:none;">
            Validation: ready to export.
          </div>

          <div class="rdt-divider"></div>

          <div class="rdt-shortcuts">
            <div><span class="rdt-chip">Ctrl</span> + <span class="rdt-chip">S</span> → force save</div>
            <div><span class="rdt-chip">Ctrl</span> + <span class="rdt-chip">Enter</span> → export (if valid)</div>
            <div class="rdt-muted">Client-safe mode applies clean wording + removes phone number.</div>
          </div>
        </div>

      </aside>

    </main>

    <!-- Toast -->
    <div class="rdt-toast" id="toast">Saved</div>

  </div>

  <!-- Your app JS (must exist) -->
  <script src="assets/app.js"></script>
</body>
</html>
